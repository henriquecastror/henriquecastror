<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.549">

  <meta name="author" content="Henrique C. Martins">
  <title>Henrique Castro Martins - Empirical Methods in Finance</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="logo.css">
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-771J5563G0"></script>

  <script type="text/javascript">

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-771J5563G0', { 'anonymize_ip': true});
  </script>
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
<meta property="og:title" content="Henrique Castro Martins - Empirical Methods in Finance">
<meta property="og:description" content="Part 3">
<meta property="og:site_name" content="Henrique Castro Martins">
<meta name="twitter:title" content="Henrique Castro Martins - Empirical Methods in Finance">
<meta name="twitter:description" content="Part 3">
<meta name="twitter:card" content="summary">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#b1cafa" class="quarto-title-block center">
  <h1 class="title">Empirical Methods in Finance</h1>
  <p class="subtitle">Part 3</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Henrique C. Martins 
</div>
</div>
</div>

</section>
<section>
<section id="conterfactuals" class="title-slide slide level1 smaller center" data-background="#b3eafc">
<h1>Conterfactuals</h1>

</section>
<section id="conterfactuals-1" class="slide level2 smaller" data-background="#b3eafc">
<h2>Conterfactuals</h2>
<ul>
<li><p>Imagine that John and Mary are moving to the north of Canada.</p></li>
<li><p>John has a history of respiratory disease and decide to buy insurance.</p></li>
<li><p>Mary does not have a history of respiratory disease and decide not to buy insurance.</p></li>
<li><p>What is the causal effect of buying insurance?</p></li>
</ul>
<table>
<thead>
<tr class="header">
<th>Default</th>
<th style="text-align: left;">John</th>
<th style="text-align: right;">Mary</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>State of insurance</td>
<td style="text-align: left;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td>Situation without insurance</td>
<td style="text-align: left;"><code>n.o.</code></td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td>Situation with insurance</td>
<td style="text-align: left;">4</td>
<td style="text-align: right;"><code>n.o.</code></td>
</tr>
<tr class="even">
<td>Observed</td>
<td style="text-align: left;">4</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td>Effect</td>
<td style="text-align: left;">?</td>
<td style="text-align: right;">?</td>
</tr>
</tbody>
</table>
<p><a href="https://www.amazon.com.br/Mastering-Metrics-Path-Cause-Effect/dp/0691152845">Source: Mastering Metrics</a></p>
</section>
<section id="conterfactuals-2" class="slide level2 smaller" data-background="#b3eafc">
<h2>Conterfactuals</h2>
<p><strong>Naïve calculation: comparing John com Mary</strong></p>
<p><span class="math display">\[Y_{john} - Y_{Mary} = 4 - 5 = -1\]</span></p>
<p>Conclusion: buying insurance has a negative effect on health.</p>
<div class="fragment">
<p><strong>This is wrong!</strong></p>
<p><a href="https://www.amazon.com.br/Mastering-Metrics-Path-Cause-Effect/dp/0691152845">Source: Mastering Metrics</a></p>
</div>
</section>
<section id="conterfactuals-3" class="slide level2 smaller" data-background="#b3eafc">
<h2>Conterfactuals</h2>
<table>
<thead>
<tr class="header">
<th>Default</th>
<th style="text-align: left;">John</th>
<th style="text-align: right;">Mary</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>State of insurance</td>
<td style="text-align: left;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td>Situation without insurance</td>
<td style="text-align: left;"><code>3</code></td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td>Situation with insurance</td>
<td style="text-align: left;">4</td>
<td style="text-align: right;"><code>5</code></td>
</tr>
<tr class="even">
<td>Observed</td>
<td style="text-align: left;">4</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td>Effect</td>
<td style="text-align: left;">?</td>
<td style="text-align: right;">?</td>
</tr>
</tbody>
</table>
<p><span class="math display">\[(Y_{1,john} - Y_{0,john}) + (Y_{1,Mary}- Y_{0,Mary}) = 4 - 3 + 5 - 5 = 0.5\]</span></p>
<p><strong>Conclusion:</strong> buying insurance has a positive effect of 1 in John’s health and average effect of 0.5 in the sample’s health (i.e.&nbsp;averages conditional on insurance status).</p>
<p><a href="https://www.amazon.com.br/Mastering-Metrics-Path-Cause-Effect/dp/0691152845">Source: Mastering Metrics</a></p>
</section></section>
<section>
<section id="regressions" class="title-slide slide level1 smaller center" data-background="#dfe3f7">
<h1>Regressions</h1>

</section>
<section id="regression-source-mastering-metrics" class="slide level2 smaller" data-background="#dfe3f7">
<h2>Regression <a href="https://www.amazon.com.br/Mastering-Metrics-Path-Cause-Effect/dp/0691152845">Source: Mastering Metrics</a></h2>
<p><strong>Let’s see how a regression could solve the problem.</strong> Imagine that you have the following data on students’ application. (<strong>Decisions in bold</strong>)</p>
<table>
<colgroup>
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th>Student</th>
<th>Private</th>
<th>Private</th>
<th>Private</th>
<th>Public</th>
<th>Public</th>
<th>Public</th>
<th>Earnings</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>Ivy</td>
<td>Leafy</td>
<td>Smart</td>
<td>State</td>
<td>Tall</td>
<td>Altered</td>
<td>110,000</td>
</tr>
<tr class="even">
<td>1</td>
<td></td>
<td>Reject</td>
<td><strong>Admit</strong></td>
<td></td>
<td>Admit</td>
<td></td>
<td>110,000</td>
</tr>
<tr class="odd">
<td>2</td>
<td></td>
<td>Reject</td>
<td><strong>Admit</strong></td>
<td></td>
<td>Admit</td>
<td></td>
<td>100,000</td>
</tr>
<tr class="even">
<td>3</td>
<td></td>
<td>Reject</td>
<td>Admit</td>
<td></td>
<td><strong>Admit</strong></td>
<td></td>
<td>110,000</td>
</tr>
<tr class="odd">
<td>4</td>
<td><strong>Admit</strong></td>
<td></td>
<td>Admit</td>
<td></td>
<td>Admit</td>
<td>Admit</td>
<td>60,000</td>
</tr>
<tr class="even">
<td>5</td>
<td>Admit</td>
<td></td>
<td>Admit</td>
<td></td>
<td>Admit</td>
<td><strong>Admit</strong></td>
<td>30,000</td>
</tr>
<tr class="odd">
<td>6</td>
<td></td>
<td><strong>Admit</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>115,000</td>
</tr>
<tr class="even">
<td>7</td>
<td></td>
<td><strong>Admit</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>75,000</td>
</tr>
<tr class="odd">
<td>8</td>
<td>Reject</td>
<td></td>
<td></td>
<td><strong>Admit</strong></td>
<td>Admit</td>
<td></td>
<td>90,000</td>
</tr>
<tr class="even">
<td>9</td>
<td>Reject</td>
<td></td>
<td></td>
<td>Admit</td>
<td><strong>Admit</strong></td>
<td></td>
<td>60,000</td>
</tr>
</tbody>
</table>
</section>
<section id="regression-source-mastering-metrics-1" class="slide level2 smaller" data-background="#dfe3f7">
<h2>Regression <a href="https://www.amazon.com.br/Mastering-Metrics-Path-Cause-Effect/dp/0691152845">Source: Mastering Metrics</a></h2>
<p><strong>We can see from the table that:</strong></p>
<ul>
<li><p>Some students earn high salary, in both situations</p></li>
<li><p>Some students earn low salary, in both situations</p></li>
<li><p>There are clusters of students that applied for the same universities</p>
<ul>
<li>How likely are they to be similar? Can we benefit from the fact they believe they are similar?</li>
</ul></li>
</ul>
<div class="fragment">
<ul>
<li><p>If we compare earnings from the first three individuals:</p>
<ul>
<li>((110 + 100)/ 2 - 11000) = -5.000</li>
</ul></li>
<li><p>If we compare earnings from individuals 4 and 5:</p>
<ul>
<li>(60 - 30) = 30.000</li>
</ul></li>
<li><p>The average is:</p>
<ul>
<li>25.000/2 = 12.500</li>
</ul></li>
</ul>
</div>
</section>
<section id="regression-source" class="slide level2 smaller" data-background="#dfe3f7">
<h2>Regression <a href="https://www.amazon.com.br/Mastering-Metrics-Path-Cause-Effect/dp/0691152845">Source</a></h2>
<p>Let’s create a dataframe to run regressions with the previous student’s data.</p>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">R</a></li><li><a href="#tabset-1-2">Python</a></li><li><a href="#tabset-1-3">Stata</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>R</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="co"># Create the data frame</span></span>
<span id="cb1-2"><a></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1-3"><a></a>  <span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>,</span>
<span id="cb1-4"><a></a>  <span class="at">earnings =</span> <span class="fu">c</span>(<span class="dv">110000</span>, <span class="dv">100000</span>, <span class="dv">110000</span>, <span class="dv">60000</span>, <span class="dv">30000</span>, <span class="dv">115000</span>, <span class="dv">75000</span>, <span class="dv">90000</span>, <span class="dv">60000</span>),</span>
<span id="cb1-5"><a></a>  <span class="at">school =</span> <span class="fu">c</span>(<span class="st">"private"</span>, <span class="st">"private"</span>, <span class="st">"public"</span>, <span class="st">"private"</span>, <span class="st">"public"</span>, <span class="st">"private"</span>, <span class="st">"private"</span>, <span class="st">"public"</span>, <span class="st">"public"</span>),</span>
<span id="cb1-6"><a></a>  <span class="at">private =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb1-7"><a></a>  <span class="at">group =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">4</span>)</span>
<span id="cb1-8"><a></a>)</span>
<span id="cb1-9"><a></a><span class="fu">print</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  id earnings  school private group
1  1   110000 private       1     1
2  2   100000 private       1     1
3  3   110000  public       0     1
4  4    60000 private       1     2
5  5    30000  public       0     2
6  6   115000 private       1     3
7  7    75000 private       1     3
8  8    90000  public       0     4
9  9    60000  public       0     4</code></pre>
</div>
</div>
</div>
<div id="tabset-1-2">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Python</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-2"><a></a>data <span class="op">=</span> pd.DataFrame({</span>
<span id="cb3-3"><a></a>    <span class="st">'id'</span>: <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">10</span>),</span>
<span id="cb3-4"><a></a>    <span class="st">'earnings'</span>: [<span class="dv">110000</span>, <span class="dv">100000</span>, <span class="dv">110000</span>, <span class="dv">60000</span>, <span class="dv">30000</span>, <span class="dv">115000</span>, <span class="dv">75000</span>, <span class="dv">90000</span>, <span class="dv">60000</span>],</span>
<span id="cb3-5"><a></a>    <span class="st">'school'</span>: [<span class="st">"private"</span>, <span class="st">"private"</span>, <span class="st">"public"</span>, <span class="st">"private"</span>, <span class="st">"public"</span>, <span class="st">"private"</span>, <span class="st">"private"</span>, <span class="st">"public"</span>, <span class="st">"public"</span>],</span>
<span id="cb3-6"><a></a>    <span class="st">'private'</span>: [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>],</span>
<span id="cb3-7"><a></a>    <span class="st">'group'</span>: [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">4</span>]</span>
<span id="cb3-8"><a></a>})</span>
<span id="cb3-9"><a></a><span class="bu">print</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   id  earnings   school  private  group
0   1    110000  private        1      1
1   2    100000  private        1      1
2   3    110000   public        0      1
3   4     60000  private        1      2
4   5     30000   public        0      2
5   6    115000  private        1      3
6   7     75000  private        1      3
7   8     90000   public        0      4
8   9     60000   public        0      4</code></pre>
</div>
</div>
</div>
<div id="tabset-1-3">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Stata</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb5-1"><a></a>input id earnings str7 school <span class="kw">private</span> <span class="fu">group</span></span>
<span id="cb5-2"><a></a>1 110000 <span class="st">"private"</span> 1 1</span>
<span id="cb5-3"><a></a>2 100000 <span class="st">"private"</span> 1 1</span>
<span id="cb5-4"><a></a>3 110000 <span class="st">"public"</span> 0 1</span>
<span id="cb5-5"><a></a>4 60000 <span class="st">"private"</span> 1 2</span>
<span id="cb5-6"><a></a>5 30000 <span class="st">"public"</span> 0 2</span>
<span id="cb5-7"><a></a>6 115000 <span class="st">"private"</span> 1 3</span>
<span id="cb5-8"><a></a>7 75000 <span class="st">"private"</span> 1 3</span>
<span id="cb5-9"><a></a>8 90000 <span class="st">"public"</span> 0 4</span>
<span id="cb5-10"><a></a>9 60000 <span class="st">"public"</span> 0 4</span>
<span id="cb5-11"><a></a><span class="kw">end</span></span>
<span id="cb5-12"><a></a><span class="ot">list</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>            id   earnings     school    private      group
  1. 1 110000 "private" 1 1
  2. 2 100000 "private" 1 1
  3. 3 110000 "public" 0 1
  4. 4 60000 "private" 1 2
  5. 5 30000 "public" 0 2
  6. 6 115000 "private" 1 3
  7. 7 75000 "private" 1 3
  8. 8 90000 "public" 0 4
  9. 9 60000 "public" 0 4
 10. end

     +-------------------------------------------+
     | id   earnings    school   private   group |
     |-------------------------------------------|
  1. |  1     110000   private         1       1 |
  2. |  2     100000   private         1       1 |
  3. |  3     110000    public         0       1 |
  4. |  4      60000   private         1       2 |
  5. |  5      30000    public         0       2 |
     |-------------------------------------------|
  6. |  6     115000   private         1       3 |
  7. |  7      75000   private         1       3 |
  8. |  8      90000    public         0       4 |
  9. |  9      60000    public         0       4 |
     +-------------------------------------------+</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="naive-regression-all-students-source" class="slide level2 smaller" data-background="#dfe3f7">
<h2>“Naive” regression all students <a href="https://www.amazon.com.br/Mastering-Metrics-Path-Cause-Effect/dp/0691152845">Source</a></h2>
<p><span class="math display">\[earnings_i = \alpha + \beta_1 Private_i + \epsilon\]</span> <strong>What is the benefit of private education here?</strong></p>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1">R</a></li><li><a href="#tabset-2-2">Python</a></li><li><a href="#tabset-2-3">Stata</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>R</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a><span class="co"># Create the data frame</span></span>
<span id="cb7-2"><a></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(earnings <span class="sc">~</span> private, <span class="at">data =</span> data)</span>
<span id="cb7-3"><a></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = earnings ~ private, data = data)

Residuals:
   Min     1Q Median     3Q    Max 
-42500 -17000   8000  18000  37500 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)   
(Intercept)    72500      14522   4.992  0.00158 **
private        19500      19484   1.001  0.35023   
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 29040 on 7 degrees of freedom
Multiple R-squared:  0.1252,    Adjusted R-squared:  0.0002116 
F-statistic: 1.002 on 1 and 7 DF,  p-value: 0.3502</code></pre>
</div>
</div>
</div>
<div id="tabset-2-2">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Python</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a></a><span class="co">#pip install numpy scikit-learn statsmodels</span></span>
<span id="cb9-2"><a></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb9-3"><a></a>X <span class="op">=</span> sm.add_constant(data[<span class="st">'private'</span>])  </span>
<span id="cb9-4"><a></a>y <span class="op">=</span> data[<span class="st">'earnings'</span>]</span>
<span id="cb9-5"><a></a>model <span class="op">=</span> sm.OLS(y, X).fit()</span>
<span id="cb9-6"><a></a><span class="bu">print</span>(model.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                            OLS Regression Results                            
==============================================================================
Dep. Variable:               earnings   R-squared:                       0.125
Model:                            OLS   Adj. R-squared:                  0.000
Method:                 Least Squares   F-statistic:                     1.002
Date:                sex, 29 ago 2025   Prob (F-statistic):              0.350
Time:                        13:51:29   Log-Likelihood:                -104.13
No. Observations:                   9   AIC:                             212.3
Df Residuals:                       7   BIC:                             212.7
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
const        7.25e+04   1.45e+04      4.992      0.002    3.82e+04    1.07e+05
private      1.95e+04   1.95e+04      1.001      0.350   -2.66e+04    6.56e+04
==============================================================================
Omnibus:                        1.011   Durbin-Watson:                   2.352
Prob(Omnibus):                  0.603   Jarque-Bera (JB):                0.666
Skew:                          -0.263   Prob(JB):                        0.717
Kurtosis:                       1.776   Cond. No.                         2.77
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
</div>
</div>
</div>
<div id="tabset-2-3">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Stata</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb11-1"><a></a>quiet input id earnings str7 school <span class="kw">private</span> <span class="fu">group</span></span>
<span id="cb11-2"><a></a>1 110000 <span class="st">"private"</span> 1 1</span>
<span id="cb11-3"><a></a>2 100000 <span class="st">"private"</span> 1 1</span>
<span id="cb11-4"><a></a>3 110000 <span class="st">"public"</span> 0 1</span>
<span id="cb11-5"><a></a>4 60000 <span class="st">"private"</span> 1 2</span>
<span id="cb11-6"><a></a>5 30000 <span class="st">"public"</span> 0 2</span>
<span id="cb11-7"><a></a>6 115000 <span class="st">"private"</span> 1 3</span>
<span id="cb11-8"><a></a>7 75000 <span class="st">"private"</span> 1 3</span>
<span id="cb11-9"><a></a>8 90000 <span class="st">"public"</span> 0 4</span>
<span id="cb11-10"><a></a>9 60000 <span class="st">"public"</span> 0 4</span>
<span id="cb11-11"><a></a><span class="kw">end</span></span>
<span id="cb11-12"><a></a></span>
<span id="cb11-13"><a></a><span class="kw">reg</span> earnings <span class="kw">private</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      Source |       SS           df       MS      Number of obs   =         9
-------------+----------------------------------   F(1, 7)         =      1.00
       Model |   845000000         1   845000000   Prob &gt; F        =    0.3502
    Residual |  5.9050e+09         7   843571429   R-squared       =    0.1252
-------------+----------------------------------   Adj R-squared   =    0.0002
       Total |  6.7500e+09         8   843750000   Root MSE        =     29044

------------------------------------------------------------------------------
    earnings | Coefficient  Std. err.      t    P&gt;|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
     private |      19500   19483.51     1.00   0.350    -26571.18    65571.18
       _cons |      72500   14522.15     4.99   0.002     38160.57    106839.4
------------------------------------------------------------------------------</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="naive-regression-all-students-source-1" class="slide level2 smaller" data-background="#dfe3f7">
<h2>“Naive” regression all students <a href="https://www.amazon.com.br/Mastering-Metrics-Path-Cause-Effect/dp/0691152845">Source</a></h2>
<p><span class="math display">\[earnings_i = \alpha + \beta_1 Private_i + \epsilon\]</span> <strong>What is the benefit of private education here?</strong></p>
<p>The coefficient of <code>private</code> is 19500, meaning that those that have private education earn 19500 more.</p>
<div class="fragment">
<p>The problem with this design is that 1) we are including all students, even those that do not bring any “information”, and 2) we are not controlling for the differences in students’ profiles.</p>
<p>Let’s fix the first problem first.</p>
<p><strong>What students should we not include in the model?</strong></p>
</div>
</section>
<section id="students-id5-source" class="slide level2 smaller" data-background="#dfe3f7">
<h2>Students id&lt;=5 <a href="https://www.amazon.com.br/Mastering-Metrics-Path-Cause-Effect/dp/0691152845">Source</a></h2>
<p><span class="math display">\[earnings_i = \alpha + \beta_1 Private_i + \epsilon \;,\; if\; i &lt;=5\]</span> <strong>What is the benefit of private education here?</strong></p>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1">R</a></li><li><a href="#tabset-3-2">Python</a></li><li><a href="#tabset-3-3">Stata</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>R</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(earnings <span class="sc">~</span> private , <span class="at">data =</span> <span class="fu">subset</span>(data,id<span class="sc">&lt;=</span><span class="dv">5</span>))</span>
<span id="cb13-2"><a></a><span class="fu">summary</span>(model2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = earnings ~ private, data = subset(data, id &lt;= 5))

Residuals:
     1      2      3      4      5 
 20000  10000  40000 -30000 -40000 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)  
(Intercept)    70000      27689   2.528   0.0856 .
private        20000      35746   0.560   0.6149  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 39160 on 3 degrees of freedom
Multiple R-squared:  0.09449,   Adjusted R-squared:  -0.2073 
F-statistic: 0.313 on 1 and 3 DF,  p-value: 0.6149</code></pre>
</div>
</div>
</div>
<div id="tabset-3-2">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Python</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a></a><span class="co">#pip install numpy scikit-learn statsmodels</span></span>
<span id="cb15-2"><a></a></span>
<span id="cb15-3"><a></a>subset_data <span class="op">=</span> data[data[<span class="st">'id'</span>] <span class="op">&lt;=</span> <span class="dv">5</span>]</span>
<span id="cb15-4"><a></a>X <span class="op">=</span> sm.add_constant(subset_data[<span class="st">'private'</span>]) </span>
<span id="cb15-5"><a></a>y <span class="op">=</span> subset_data[<span class="st">'earnings'</span>]</span>
<span id="cb15-6"><a></a>model2 <span class="op">=</span> sm.OLS(y, X).fit()</span>
<span id="cb15-7"><a></a><span class="bu">print</span>(model2.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                            OLS Regression Results                            
==============================================================================
Dep. Variable:               earnings   R-squared:                       0.094
Model:                            OLS   Adj. R-squared:                 -0.207
Method:                 Least Squares   F-statistic:                    0.3130
Date:                sex, 29 ago 2025   Prob (F-statistic):              0.615
Time:                        13:51:31   Log-Likelihood:                -58.694
No. Observations:                   5   AIC:                             121.4
Df Residuals:                       3   BIC:                             120.6
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
const           7e+04   2.77e+04      2.528      0.086   -1.81e+04    1.58e+05
private         2e+04   3.57e+04      0.560      0.615   -9.38e+04    1.34e+05
==============================================================================
Omnibus:                          nan   Durbin-Watson:                   1.304
Prob(Omnibus):                    nan   Jarque-Bera (JB):                0.520
Skew:                          -0.129   Prob(JB):                        0.771
Kurtosis:                       1.441   Cond. No.                         2.92
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
</div>
</div>
</div>
<div id="tabset-3-3">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Stata</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb17-1"><a></a>quiet input id earnings str7 school <span class="kw">private</span> <span class="fu">group</span></span>
<span id="cb17-2"><a></a>1 110000 <span class="st">"private"</span> 1 1</span>
<span id="cb17-3"><a></a>2 100000 <span class="st">"private"</span> 1 1</span>
<span id="cb17-4"><a></a>3 110000 <span class="st">"public"</span> 0 1</span>
<span id="cb17-5"><a></a>4 60000 <span class="st">"private"</span> 1 2</span>
<span id="cb17-6"><a></a>5 30000 <span class="st">"public"</span> 0 2</span>
<span id="cb17-7"><a></a>6 115000 <span class="st">"private"</span> 1 3</span>
<span id="cb17-8"><a></a>7 75000 <span class="st">"private"</span> 1 3</span>
<span id="cb17-9"><a></a>8 90000 <span class="st">"public"</span> 0 4</span>
<span id="cb17-10"><a></a>9 60000 <span class="st">"public"</span> 0 4</span>
<span id="cb17-11"><a></a><span class="kw">end</span></span>
<span id="cb17-12"><a></a><span class="kw">reg</span> earnings <span class="kw">private</span> <span class="kw">if</span> id&lt;=5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      Source |       SS           df       MS      Number of obs   =         5
-------------+----------------------------------   F(1, 3)         =      0.31
       Model |   480000000         1   480000000   Prob &gt; F        =    0.6149
    Residual |  4.6000e+09         3  1.5333e+09   R-squared       =    0.0945
-------------+----------------------------------   Adj R-squared   =   -0.2073
       Total |  5.0800e+09         4  1.2700e+09   Root MSE        =     39158

------------------------------------------------------------------------------
    earnings | Coefficient  Std. err.      t    P&gt;|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
     private |      20000   35746.02     0.56   0.615    -93759.78    133759.8
       _cons |      70000   27688.75     2.53   0.086    -18117.95    158117.9
------------------------------------------------------------------------------</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="students-id5-source-1" class="slide level2 smaller" data-background="#dfe3f7">
<h2>Students id&lt;=5 <a href="https://www.amazon.com.br/Mastering-Metrics-Path-Cause-Effect/dp/0691152845">Source</a></h2>
<p><span class="math display">\[earnings_i = \alpha + \beta_1 Private_i + \epsilon \;,\; if\; i &lt;=5\]</span> <strong>What is the benefit of private education here?</strong></p>
<p>Students 6 and 7 only applied to Private, while students 8 and 9 did not really had a choice. So we should exclude them.</p>
<div class="fragment">
<p>The benefit of private is now 20000.</p>
<p>The coefficient did not change much, but the design improved partially.</p>
</div>
<div class="fragment">
<p>We still have an uncontrolled “heterogeneity” in the groups of students. <strong>Students 1 to 3 seem to earn more no matter their decisions</strong>.</p>
</div>
</section>
<section id="apples-to-apples-source" class="slide level2 smaller" data-background="#dfe3f7">
<h2>Apples-to-Apples <a href="https://www.amazon.com.br/Mastering-Metrics-Path-Cause-Effect/dp/0691152845">Source</a></h2>
<p><span class="math display">\[earnings_i = \alpha + \beta_1 Private_i + \beta_2 Group+ \epsilon \;,\; if\; i &lt;=5\]</span> <strong>This is the best we can do.</strong></p>
<div class="panel-tabset">
<ul id="tabset-4" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-4-1">R</a></li><li><a href="#tabset-4-2">Python</a></li><li><a href="#tabset-4-3">Stata</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>R</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a>data<span class="sc">$</span>dummy <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(data<span class="sc">$</span>group <span class="sc">==</span> <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb19-2"><a></a>data<span class="sc">$</span>dummy[data<span class="sc">$</span>group <span class="sc">==</span> <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb19-3"><a></a>model3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(earnings <span class="sc">~</span> private <span class="sc">+</span> dummy, <span class="at">data =</span> <span class="fu">subset</span>(data,id<span class="sc">&lt;=</span><span class="dv">5</span>))</span>
<span id="cb19-4"><a></a><span class="fu">summary</span>(model3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = earnings ~ private + dummy, data = subset(data, 
    id &lt;= 5))

Residuals:
         1          2          3          4          5 
 1.182e-11 -1.000e+04  1.000e+04  1.000e+04 -1.000e+04 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)  
(Intercept)    40000      11952   3.347   0.0789 .
private        10000      13093   0.764   0.5248  
dummy          60000      13093   4.583   0.0445 *
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 14140 on 2 degrees of freedom
Multiple R-squared:  0.9213,    Adjusted R-squared:  0.8425 
F-statistic:  11.7 on 2 and 2 DF,  p-value: 0.07874</code></pre>
</div>
</div>
</div>
<div id="tabset-4-2">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Python</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a></a><span class="co">#pip install numpy scikit-learn statsmodels</span></span>
<span id="cb21-2"><a></a></span>
<span id="cb21-3"><a></a>data[<span class="st">'dummy'</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb21-4"><a></a>data.loc[data[<span class="st">'group'</span>] <span class="op">==</span> <span class="dv">2</span>, <span class="st">'dummy'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb21-5"><a></a>subset_data <span class="op">=</span> data[data[<span class="st">'id'</span>] <span class="op">&lt;=</span> <span class="dv">5</span>]</span>
<span id="cb21-6"><a></a>X <span class="op">=</span> sm.add_constant(subset_data[[<span class="st">'private'</span>, <span class="st">'dummy'</span>]])</span>
<span id="cb21-7"><a></a>y <span class="op">=</span> subset_data[<span class="st">'earnings'</span>]</span>
<span id="cb21-8"><a></a>model3 <span class="op">=</span> sm.OLS(y, X).fit()</span>
<span id="cb21-9"><a></a><span class="bu">print</span>(model3.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                            OLS Regression Results                            
==============================================================================
Dep. Variable:               earnings   R-squared:                       0.921
Model:                            OLS   Adj. R-squared:                  0.843
Method:                 Least Squares   F-statistic:                     11.70
Date:                sex, 29 ago 2025   Prob (F-statistic):             0.0787
Time:                        13:51:33   Log-Likelihood:                -52.589
No. Observations:                   5   AIC:                             111.2
Df Residuals:                       2   BIC:                             110.0
Df Model:                           2                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
const           4e+04    1.2e+04      3.347      0.079   -1.14e+04    9.14e+04
private         1e+04   1.31e+04      0.764      0.525   -4.63e+04    6.63e+04
dummy           6e+04   1.31e+04      4.583      0.044    3665.052    1.16e+05
==============================================================================
Omnibus:                          nan   Durbin-Watson:                   2.250
Prob(Omnibus):                    nan   Jarque-Bera (JB):                0.638
Skew:                           0.000   Prob(JB):                        0.727
Kurtosis:                       1.250   Cond. No.                         3.49
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
</div>
</div>
</div>
<div id="tabset-4-3">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Stata</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb23-1"><a></a>quiet input id earnings str7 school <span class="kw">private</span> <span class="fu">group</span></span>
<span id="cb23-2"><a></a>1 110000 <span class="st">"private"</span> 1 1</span>
<span id="cb23-3"><a></a>2 100000 <span class="st">"private"</span> 1 1</span>
<span id="cb23-4"><a></a>3 110000 <span class="st">"public"</span> 0 1</span>
<span id="cb23-5"><a></a>4 60000 <span class="st">"private"</span> 1 2</span>
<span id="cb23-6"><a></a>5 30000 <span class="st">"public"</span> 0 2</span>
<span id="cb23-7"><a></a>6 115000 <span class="st">"private"</span> 1 3</span>
<span id="cb23-8"><a></a>7 75000 <span class="st">"private"</span> 1 3</span>
<span id="cb23-9"><a></a>8 90000 <span class="st">"public"</span> 0 4</span>
<span id="cb23-10"><a></a>9 60000 <span class="st">"public"</span> 0 4</span>
<span id="cb23-11"><a></a><span class="kw">end</span></span>
<span id="cb23-12"><a></a><span class="kw">gen</span>     dummy = 1 <span class="kw">if</span> <span class="fu">group</span> == 1</span>
<span id="cb23-13"><a></a><span class="kw">replace</span> dummy = 0 <span class="kw">if</span> <span class="fu">group</span> == 2</span>
<span id="cb23-14"><a></a><span class="kw">reg</span> earnings <span class="kw">private</span> dummy <span class="kw">if</span> id&lt;=5 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(6 missing values generated)

(2 real changes made)

      Source |       SS           df       MS      Number of obs   =         5
-------------+----------------------------------   F(2, 2)         =     11.70
       Model |  4.6800e+09         2  2.3400e+09   Prob &gt; F        =    0.0787
    Residual |   400000000         2   200000000   R-squared       =    0.9213
-------------+----------------------------------   Adj R-squared   =    0.8425
       Total |  5.0800e+09         4  1.2700e+09   Root MSE        =     14142

------------------------------------------------------------------------------
    earnings | Coefficient  Std. err.      t    P&gt;|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
     private |      10000   13093.07     0.76   0.525    -46334.95    66334.95
       dummy |      60000   13093.07     4.58   0.044     3665.052    116334.9
       _cons |      40000   11952.29     3.35   0.079    -11426.54    91426.54
------------------------------------------------------------------------------</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="regression" class="slide level2 smaller" data-background="#dfe3f7">
<h2>Regression</h2>
<p>The previous regression assumes that students 1 to 3 are different that students 4 and 5.</p>
<p>We will find many instances like that in empirical research. E.g., industry.</p>
<div class="fragment">
<p>The private school coefficient, in this case 10,000, implies a private-public earnings differential of this value.</p>
</div>
<div class="fragment">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p>The Y above is used in monetary values.</p>
<p>Using a logged y, ln(Y) or ln(earnings), allows estimates to be interpreted as a percent change.</p>
<p>For instance if <span class="math inline">\(\beta=0.05\)</span>, it means that the earnings differential is 5% for those studying in private schools (conditional on the controls included in the model).</p>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="ovb-again" class="title-slide slide level1 smaller center" data-background="#f5caae">
<h1>OVB again</h1>

</section>
<section id="ovb-again-1" class="slide level2 smaller" data-background="#f5caae">
<h2>OVB again</h2>
<p>Regression is a way to make other things equal (ceteris paribus), but equality is generated only for variables included in the model as controls on the right-hand sided of the model.</p>
<p>Failure to include enough controls of the right controls still leave us with selection bias.</p>
<p>The regression version of the selection bias generated by the inadequate controls is called <strong>Omitted Variable Bias (OVB)</strong>.</p>
<p>The inclusion of a control that should not be included is called “<strong>Bad Controls</strong>” problem.</p>
</section>
<section id="ovb-again-2" class="slide level2 smaller" data-background="#f5caae">
<h2>OVB again</h2>
<p><strong>How could we calculate the OVB in this example?</strong></p>
<p><span class="math display">\[earnings_i = 70.000 + 20.000\times Private_i  \epsilon \]</span></p>
<p><span class="math display">\[earnings_i = 40.000 + 10.000 \times Private_i + 60.000 \times Group+ \epsilon\]</span></p>
<ul>
<li><span class="math inline">\(\beta\)</span> (1st regression) - <span class="math inline">\(\beta\)</span> (second regression).</li>
<li>The OVB here is 20.000 - 10.000 = 10.000.</li>
<li>Meaning that the <span class="math inline">\(\beta\)</span> (1st regression) is 10.000 higher than what it should be.</li>
</ul>
</section>
<section id="ovb-again-3" class="slide level2 smaller" data-background="#f5caae">
<h2>OVB again</h2>
<p><strong>How could we calculate the OVB in this example?</strong></p>
<p>We could calculate the bias by estimating:</p>
<p><span class="math display">\[Private=\alpha + \beta_{omitted} \times Group + \epsilon\]</span></p>
<p>Then,</p>
<p><span class="math display">\[\beta_{omitted} \times \beta_{missing} = 0.1667 * 60.000 = 10.000\]</span></p>
<p>The OVB is 10.000, meaning that the first model (the one with the omitted variable) estimates a Beta that is 10.000 higher than it should be.</p>
</section>
<section id="ovb-again-4" class="slide level2 smaller" data-background="#f5caae">
<h2>OVB again</h2>
<div class="panel-tabset">
<ul id="tabset-5" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-5-1">R</a></li><li><a href="#tabset-5-2">Python</a></li><li><a href="#tabset-5-3">Stata</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>R</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a>model4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(private <span class="sc">~</span> dummy , <span class="at">data =</span> <span class="fu">subset</span>(data,id<span class="sc">&lt;=</span><span class="dv">5</span>))</span>
<span id="cb25-2"><a></a><span class="fu">summary</span>(model4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = private ~ dummy, data = subset(data, id &lt;= 5))

Residuals:
      1       2       3       4       5 
 0.3333  0.3333 -0.6667  0.5000 -0.5000 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)   0.5000     0.4410   1.134    0.339
dummy         0.1667     0.5693   0.293    0.789

Residual standard error: 0.6236 on 3 degrees of freedom
Multiple R-squared:  0.02778,   Adjusted R-squared:  -0.2963 
F-statistic: 0.08571 on 1 and 3 DF,  p-value: 0.7888</code></pre>
</div>
<details class="code-fold">
<summary>R</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>matrix2<span class="ot">&lt;-</span> <span class="fu">summary</span>(model4)<span class="sc">$</span>coefficients</span>
<span id="cb27-2"><a></a><span class="fu">sum</span>(<span class="fl">0.1667</span> <span class="sc">*</span> <span class="dv">60000</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10002</code></pre>
</div>
</div>
</div>
<div id="tabset-5-2">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Python</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a></a>subset_data <span class="op">=</span> data[data[<span class="st">'id'</span>] <span class="op">&lt;=</span> <span class="dv">5</span>]</span>
<span id="cb29-2"><a></a>model4 <span class="op">=</span> sm.OLS(subset_data[<span class="st">'private'</span>], sm.add_constant(subset_data[[<span class="st">'dummy'</span>]])).fit()</span>
<span id="cb29-3"><a></a><span class="bu">print</span>(model4.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                            OLS Regression Results                            
==============================================================================
Dep. Variable:                private   R-squared:                       0.028
Model:                            OLS   Adj. R-squared:                 -0.296
Method:                 Least Squares   F-statistic:                   0.08571
Date:                sex, 29 ago 2025   Prob (F-statistic):              0.789
Time:                        13:51:35   Log-Likelihood:                -3.4565
No. Observations:                   5   AIC:                             10.91
Df Residuals:                       3   BIC:                             10.13
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
const          0.5000      0.441      1.134      0.339      -0.903       1.903
dummy          0.1667      0.569      0.293      0.789      -1.645       1.978
==============================================================================
Omnibus:                          nan   Durbin-Watson:                   2.881
Prob(Omnibus):                    nan   Jarque-Bera (JB):                0.749
Skew:                          -0.394   Prob(JB):                        0.688
Kurtosis:                       1.276   Cond. No.                         2.92
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
</div>
<details class="code-fold">
<summary>Python</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a></a>bias <span class="op">=</span> <span class="fl">0.1667</span> <span class="op">*</span> <span class="dv">60000</span></span>
<span id="cb31-2"><a></a><span class="bu">print</span>(bias)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>10002.0</code></pre>
</div>
</div>
</div>
<div id="tabset-5-3">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Stata</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb33-1"><a></a>quiet input id earnings str7 school <span class="kw">private</span> <span class="fu">group</span></span>
<span id="cb33-2"><a></a>1 110000 <span class="st">"private"</span> 1 1</span>
<span id="cb33-3"><a></a>2 100000 <span class="st">"private"</span> 1 1</span>
<span id="cb33-4"><a></a>3 110000 <span class="st">"public"</span> 0 1</span>
<span id="cb33-5"><a></a>4 60000 <span class="st">"private"</span> 1 2</span>
<span id="cb33-6"><a></a>5 30000 <span class="st">"public"</span> 0 2</span>
<span id="cb33-7"><a></a>6 115000 <span class="st">"private"</span> 1 3</span>
<span id="cb33-8"><a></a>7 75000 <span class="st">"private"</span> 1 3</span>
<span id="cb33-9"><a></a>8 90000 <span class="st">"public"</span> 0 4</span>
<span id="cb33-10"><a></a>9 60000 <span class="st">"public"</span> 0 4</span>
<span id="cb33-11"><a></a><span class="kw">end</span></span>
<span id="cb33-12"><a></a><span class="kw">gen</span>     dummy = 1 <span class="kw">if</span> <span class="fu">group</span> == 1</span>
<span id="cb33-13"><a></a><span class="kw">replace</span> dummy = 0 <span class="kw">if</span> <span class="fu">group</span> == 2</span>
<span id="cb33-14"><a></a><span class="kw">reg</span> <span class="kw">private</span> dummy <span class="kw">if</span> id&lt;=5</span>
<span id="cb33-15"><a></a><span class="kw">di</span> .1666667 *  60000 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(6 missing values generated)

(2 real changes made)

      Source |       SS           df       MS      Number of obs   =         5
-------------+----------------------------------   F(1, 3)         =      0.09
       Model |  .033333333         1  .033333333   Prob &gt; F        =    0.7888
    Residual |  1.16666667         3  .388888889   R-squared       =    0.0278
-------------+----------------------------------   Adj R-squared   =   -0.2963
       Total |         1.2         4          .3   Root MSE        =    .62361

------------------------------------------------------------------------------
     private | Coefficient  Std. err.      t    P&gt;|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       dummy |   .1666667    .569275     0.29   0.789    -1.645021    1.978354
       _cons |         .5   .4409586     1.13   0.339    -.9033269    1.903327
------------------------------------------------------------------------------

10000.002</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="ovb-again-5" class="slide level2 smaller" data-background="#f5caae">
<h2>OVB again</h2>
<p><strong>So what?</strong></p>
<ul>
<li><p>Anticipating the effect of the omitted variable on the non-omitted variable can tell you the sign of the bias.</p></li>
<li><p>Then you can know if the bias is attenuating or increasing the effect you are investigating.</p></li>
<li><p>If attenuating, the problem is smaller than if it is increasing</p></li>
</ul>
</section>
<section id="ovb-again-6" class="slide level2 smaller" data-background="#f5caae">
<h2>OVB again</h2>
<p><strong>Regressions</strong></p>
<ul>
<li><p>The previous examples show that we can run <strong>regressions and find correlations</strong> …</p></li>
<li><p>… And we can run regressions and find <strong>causal effects</strong>.</p></li>
<li><p>But we need to control for all relevant variables, otherwise we have the <em>OVB problem</em>.</p></li>
<li><p>Should you not look careful to your data, you’d miss the inclusion of the variable <code>group</code>.</p></li>
<li><p>The results show that you may estimate a spurious coefficient twice the size of the “true” coefficient.</p></li>
</ul>
</section></section>
<section>
<section id="bad-controls-problem" class="title-slide slide level1 smaller center" data-background="#dff2c7">
<h1>Bad Controls Problem</h1>

</section>
<section id="bad-controls-problem-1" class="slide level2 smaller" data-background="#dff2c7">
<h2>Bad Controls Problem</h2>
<p><strong>Bad controls</strong> are variables that are <strong>also outcome of the treatment</strong> being studied.</p>
<p>A <strong>Bad control</strong> could very well be a <strong>dependent variable</strong> of the treatment as well.</p>
<p><strong>Good controls</strong> are variables that <strong>you can think as being fixed</strong> at the time of the treatment.</p>
<div class="fragment">
<p>Let’s return to the model.</p>
<p><span class="math display">\[earnings_i = \alpha + \beta_1 Private_i + \beta_2 Group+ \epsilon \;,\; if\; i &lt;=5\]</span></p>
<p>Assuming you also have the occupation of the students at the time of earnings. Should you include <code>occupation</code> in the model?</p>
<p><span class="math display">\[earnings_i = \alpha + \beta_1 Private_i + \beta_2 Group + \beta_3 Occupation + \epsilon \;,\; if\; i &lt;=5\]</span></p>
<p>Reasoning: “<em>We should use occupation as control because it would be wise to look at the effect of education on earnings only for those within an occupation</em>”.</p>
<p>What is the problem with this reasoning?</p>
</div>
</section>
<section id="bad-controls-problem-2" class="slide level2 smaller" data-background="#dff2c7">
<h2>Bad Controls Problem</h2>
<p>The problem is that studying in private would increase the chances of getting a white-collar occupation, i.e., <em>private education (treatment) affects the occupation (bad control)</em>.</p>
<p>In this case, should you include occupation as control, the coefficient of interest no longer has a causal interpretation.</p>
<div class="fragment">
<p><strong>This is a very common problem in empirical research</strong>.</p>
<p>It is not hard to come up with stories of why a control is a bad control.</p>
</div>
</section></section>
<section>
<section id="randomization" class="title-slide slide level1 smaller center" data-background="#ff9c6b">
<h1>Randomization</h1>

</section>
<section id="randomization-1" class="slide level2 smaller" data-background="#ff9c6b">
<h2>Randomization</h2>
<p><strong>Now I want to discuss the idea of randomization</strong></p>
<p>Suppose you have developed a treatment (e.g., a program) that you believe will increase the ‘motivation’ of employees of a factory.</p>
<p>You have 100 employees to use in an experiment to test your claim that the treatment will increase motivation.</p>
<div class="fragment">
<ul>
<li>You randomly allocate 50 employees to receive the treatment. The other 50 are part of the control group.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>You treat all employees in the same manner, except for the treatment.</li>
</ul>
</div>
<div class="fragment">
<p>Using the data available, this is the <strong>difference in motivation between the treatment and control groups (next slide):</strong></p>
</div>
</section>
<section id="randomization-2" class="slide level2 smaller" data-background="#ff9c6b">
<h2>Randomization</h2>
<div class="panel-tabset">
<ul id="tabset-6" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-6-1">R</a></li><li><a href="#tabset-6-2">Python</a></li><li><a href="#tabset-6-3">Stata</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>R</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a></a><span class="fu">library</span>(readxl)</span>
<span id="cb35-2"><a></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb35-3"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb35-4"><a></a><span class="fu">library</span>(dplyr)</span>
<span id="cb35-5"><a></a>data  <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"files/part_3_data.xlsx"</span>, <span class="at">range =</span> <span class="st">"A1:C101"</span>)</span>
<span id="cb35-6"><a></a><span class="co"># Box plot control vs treatment groups</span></span>
<span id="cb35-7"><a></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">y=</span>motivation, <span class="at">fill=</span>group)) <span class="sc">+</span>   </span>
<span id="cb35-8"><a></a>  <span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb35-9"><a></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">color=</span><span class="st">"black"</span>, <span class="at">size=</span><span class="dv">30</span>, <span class="at">face=</span><span class="st">"bold"</span>),</span>
<span id="cb35-10"><a></a>        <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"grey95"</span>, <span class="at">colour =</span> <span class="st">"grey95"</span>),</span>
<span id="cb35-11"><a></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">"bold"</span>, <span class="at">color=</span><span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb35-12"><a></a>        <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb35-13"><a></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb35-14"><a></a>        <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">3</span>, <span class="st">"cm"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="part_3_files/figure-revealjs/unnamed-chunk-16-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-2">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Python</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb36-2"><a></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb36-3"><a></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb36-4"><a></a></span>
<span id="cb36-5"><a></a><span class="co"># Read data from Excel file</span></span>
<span id="cb36-6"><a></a>data <span class="op">=</span> pd.read_excel(<span class="st">"files/part_3_data.xlsx"</span>)</span>
<span id="cb36-7"><a></a></span>
<span id="cb36-8"><a></a><span class="co"># Create a box plot of control vs treatment groups using seaborn</span></span>
<span id="cb36-9"><a></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">7</span>, <span class="dv">5</span>))</span>
<span id="cb36-10"><a></a>sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">'whitegrid'</span>)</span>
<span id="cb36-11"><a></a>sns.boxplot(x<span class="op">=</span><span class="st">'group'</span>, y<span class="op">=</span><span class="st">'motivation'</span>, data<span class="op">=</span>data, palette<span class="op">=</span><span class="st">'Set2'</span>)</span>
<span id="cb36-12"><a></a>plt.title(<span class="st">"Box Plot of Control vs Treatment Groups"</span>, fontsize<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb36-13"><a></a>plt.xlabel(<span class="st">"Group"</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb36-14"><a></a>plt.ylabel(<span class="st">"Motivation"</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb36-15"><a></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="part_3_files/figure-revealjs/unnamed-chunk-17-1.png" class="quarto-figure quarto-figure-center" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-3">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Stata</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb37-1"><a></a>import excel <span class="st">"files/part_3_data.xlsx"</span>, cellrange(A1:C101) firstrow <span class="kw">clear</span></span>
<span id="cb37-2"><a></a><span class="kw">graph</span> box motivation , <span class="bn">over</span>(<span class="fu">group</span>) box(1, <span class="kw">color</span>(<span class="bn">black</span>))     <span class="bn">ytitle</span>(<span class="st">"Motivation"</span>)  </span>
<span id="cb37-3"><a></a></span>
<span id="cb37-4"><a></a><span class="kw">quietly</span> <span class="kw">graph</span> <span class="kw">export</span> <span class="st">"files/graph3_5.svg"</span>, <span class="kw">replace</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(3 vars, 100 obs)</code></pre>
</div>
</div>
<p><img data-src="files/graph3_5.svg"></p>
</div>
</div>
</div>
</section>
<section id="randomization-3" class="slide level2 smaller" data-background="#ff9c6b">
<h2>Randomization</h2>
<p>The calculated means are below. And they are statistically different.</p>
<div class="panel-tabset">
<ul id="tabset-7" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-7-1">R</a></li><li><a href="#tabset-7-2">Python</a></li><li><a href="#tabset-7-3">Stata</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>R</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a></a>data  <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"files/part_3_data.xlsx"</span>, <span class="at">range =</span> <span class="st">"A1:C101"</span>)</span>
<span id="cb39-2"><a></a><span class="fu">tapply</span>(data<span class="sc">$</span>motivation, data<span class="sc">$</span>group, summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$Control
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  16.70   19.70   20.70   20.80   22.27   24.60 

$Treatment
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  17.60   20.52   22.50   22.27   23.77   26.50 </code></pre>
</div>
<details class="code-fold">
<summary>R</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a></a><span class="fu">t.test</span>(motivation <span class="sc">~</span> group, <span class="at">data =</span> data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Welch Two Sample t-test

data:  motivation by group
t = -3.7301, df = 94.879, p-value = 0.0003258
alternative hypothesis: true difference in means between group Control and group Treatment is not equal to 0
95 percent confidence interval:
 -2.2493176 -0.6866824
sample estimates:
  mean in group Control mean in group Treatment 
                 20.800                  22.268 </code></pre>
</div>
</div>
</div>
<div id="tabset-7-2">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Python</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a></a>data <span class="op">=</span> pd.read_excel(<span class="st">"files/part_3_data.xlsx"</span>)</span>
<span id="cb43-2"><a></a>group_summary <span class="op">=</span> data.groupby(<span class="st">'group'</span>)[<span class="st">'motivation'</span>].describe()</span>
<span id="cb43-3"><a></a><span class="bu">print</span>(group_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           count    mean       std   min     25%   50%     75%   max
group                                                               
Control     50.0  20.800  1.780392  16.7  19.700  20.7  22.275  24.6
Treatment   50.0  22.268  2.138800  17.6  20.525  22.5  23.775  26.5</code></pre>
</div>
</div>
</div>
<div id="tabset-7-3">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Stata</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb45-1"><a></a>import excel <span class="st">"files/part_3_data.xlsx"</span>, cellrange(A1:C101) firstrow <span class="kw">clear</span></span>
<span id="cb45-2"><a></a><span class="kw">bys</span> <span class="fu">group</span>  : <span class="kw">sum</span> motivation</span>
<span id="cb45-3"><a></a>estpost <span class="kw">ttest</span> motivation , <span class="kw">by</span>(<span class="fu">group</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(3 vars, 100 obs)


-------------------------------------------------------------------------------
-&gt; group = Control

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  motivation |         50        20.8    1.780392       16.7       24.6

-------------------------------------------------------------------------------
-&gt; group = Treatment

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  motivation |         50      22.268      2.1388       17.6       26.5

             |      e(b)   e(count)      e(se)       e(t)    e(df_t) 
-------------+-------------------------------------------------------
  motivation |    -1.468        100   .3935546  -3.730105         98 

             |    e(p_l)       e(p)     e(p_u)     e(N_1)    e(mu_1) 
-------------+-------------------------------------------------------
  motivation |  .0001604   .0003208   .9998396         50       20.8 

             |    e(N_2)    e(mu_2) 
-------------+----------------------
  motivation |        50     22.268 </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="randomization-4" class="slide level2 smaller" data-background="#ff9c6b">
<h2>Randomization</h2>
<p><strong>Is there evidence that the program has increased motivation?</strong></p>
<div class="fragment">
<ul>
<li><p>well, if you randomly split a group of 100 people into two groups of 50, you certainly wouldn’t get the same mean motivation in both groups even if you treated them exactly alike.</p></li>
<li><p>Maybe the difference that we see is just such a difference?</p></li>
</ul>
<p><strong>How can we test this hypothesis?</strong></p>
</div>
</section>
<section id="randomization-5" class="slide level2 smaller" data-background="#ff9c6b">
<h2>Randomization</h2>
<p><strong>Solution</strong>:</p>
<ul>
<li><p>Suppose the treatment had no effect, and the employees developed their motivation independently of the treatment.</p></li>
<li><p>What is the chance that the 50 employees randomly assigned to the treatment group would have an average at least 1.47 (22.27 - 20.80) points higher than the average motivation of the employees randomly assigned to the control group?</p></li>
</ul>
</section>
<section id="randomization-6" class="slide level2 smaller scrollable" data-background="#ff9c6b">
<h2>Randomization</h2>
<p><strong>Steps</strong></p>
<ol type="1">
<li><p>Randomly split the 100 employees that we observed in this experiment into two groups of 50.</p></li>
<li><p>Note the difference in the mean motivation between the two groups.</p></li>
<li><p>Repeat 1 and 2 a total of 10,000 times.</p></li>
<li><p>Note the proportion of times the difference is at least 1.47 (22.27 - 20.80).</p></li>
</ol>
</section>
<section id="randomization-7" class="slide level2 smaller" data-background="#ff9c6b">
<h2>Randomization</h2>
<div class="panel-tabset">
<ul id="tabset-8" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-8-1">R</a></li><li><a href="#tabset-8-2">Stata</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>R</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a></a><span class="co"># Load necessary libraries</span></span>
<span id="cb47-2"><a></a>data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"files/part_3_data.xlsx"</span>, <span class="at">range =</span> <span class="st">"A1:C101"</span>)</span>
<span id="cb47-3"><a></a>comb <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb47-4"><a></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">matrix</span>(<span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">nrow =</span> comb))</span>
<span id="cb47-5"><a></a><span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"order"</span> ,<span class="st">"diff"</span>)</span>
<span id="cb47-6"><a></a><span class="co"># Create the loop for randomization:</span></span>
<span id="cb47-7"><a></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> comb)) {</span>
<span id="cb47-8"><a></a>  <span class="fu">set.seed</span>(i)                               </span>
<span id="cb47-9"><a></a>  data<span class="sc">$</span>temp <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">100</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">1</span>)  <span class="co"># Creating 100 random numbers 0 to 1</span></span>
<span id="cb47-10"><a></a>  data <span class="ot">&lt;-</span> data[<span class="fu">order</span>(data<span class="sc">$</span>temp),]            <span class="co"># Sorting data by the random numbers generated in the previous row</span></span>
<span id="cb47-11"><a></a>  data<span class="sc">$</span>rank <span class="ot">&lt;-</span> <span class="fu">rank</span>(data<span class="sc">$</span>temp)               <span class="co"># Ranking by the random numbers</span></span>
<span id="cb47-12"><a></a><span class="co"># The row below defines the treatment group based on the random numbers generated. This is where we guarantee randomization</span></span>
<span id="cb47-13"><a></a>data<span class="sc">$</span>status_rank <span class="ot">&lt;-</span> <span class="fu">case_when</span>(data<span class="sc">$</span>rank <span class="sc">&lt;=</span> <span class="dv">50</span> <span class="sc">~</span> <span class="st">"Control_rand"</span>, data<span class="sc">$</span>rank <span class="sc">&gt;</span> <span class="dv">50</span> <span class="sc">~</span> <span class="st">"Treated_rand"</span>)</span>
<span id="cb47-14"><a></a><span class="co"># Calculate the new means of the new groups. Need to transpose data.</span></span>
<span id="cb47-15"><a></a>means <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">as.data.frame</span>(<span class="fu">tapply</span>(data<span class="sc">$</span>motivation, data<span class="sc">$</span>status_rank, mean)))</span>
<span id="cb47-16"><a></a><span class="co"># Moving the new means to df. Each row is the difference of means</span></span>
<span id="cb47-17"><a></a>df[i, <span class="dv">1</span>] <span class="ot">&lt;-</span> i</span>
<span id="cb47-18"><a></a>df[i, <span class="dv">2</span>] <span class="ot">&lt;-</span> means[<span class="dv">1</span>, <span class="dv">2</span>] <span class="sc">-</span> means[<span class="dv">1</span>, <span class="dv">1</span>]</span>
<span id="cb47-19"><a></a><span class="fu">rm</span>(means) <span class="co"># Deleting value</span></span>
<span id="cb47-20"><a></a>data <span class="ot">=</span> <span class="fu">subset</span>(data, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(temp, rank, status_rank)) <span class="co"># Deleting variables</span></span>
<span id="cb47-21"><a></a>}</span>
<span id="cb47-22"><a></a><span class="co"># Calculate a suitable binwidth for the histogram</span></span>
<span id="cb47-23"><a></a>binwidth <span class="ot">&lt;-</span> (<span class="fu">max</span>(df<span class="sc">$</span>diff) <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>diff)) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">length</span>(df<span class="sc">$</span>diff))</span>
<span id="cb47-24"><a></a><span class="co"># Create a histogram of the differences with the calculated binwidth</span></span>
<span id="cb47-25"><a></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> diff)) <span class="sc">+</span></span>
<span id="cb47-26"><a></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> binwidth, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb47-27"><a></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribution of Differences"</span>, <span class="at">x =</span> <span class="st">"Difference"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="part_3_files/figure-revealjs/unnamed-chunk-22-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-8-2">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Stata</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb48-1"><a></a>import excel <span class="st">"files/part_3_data.xlsx"</span>, cellrange(A1:C101) firstrow <span class="kw">clear</span></span>
<span id="cb48-2"><a></a><span class="kw">set</span> <span class="dv">seed</span> 472195         </span>
<span id="cb48-3"><a></a><span class="kw">sort</span> <span class="fu">group</span>       </span>
<span id="cb48-4"><a></a><span class="kw">set</span> <span class="kw">obs</span> 10000                </span>
<span id="cb48-5"><a></a><span class="kw">egen</span> fin_order = <span class="fu">seq</span>() </span>
<span id="cb48-6"><a></a><span class="kw">sort</span> fin_order               </span>
<span id="cb48-7"><a></a><span class="kw">summarize</span>                   </span>
<span id="cb48-8"><a></a><span class="kw">gen</span> av_diff=.</span>
<span id="cb48-9"><a></a></span>
<span id="cb48-10"><a></a><span class="kw">local</span> i = 1</span>
<span id="cb48-11"><a></a><span class="kw">while</span> <span class="ot">`i'</span>&lt;=10000 {</span>
<span id="cb48-12"><a></a></span>
<span id="cb48-13"><a></a>    <span class="kw">sort</span> fin_order</span>
<span id="cb48-14"><a></a>    <span class="kw">gen</span> rand_num<span class="ot">`i'</span> = uniform() <span class="kw">if</span> !<span class="fu">missing</span>(motivation)</span>
<span id="cb48-15"><a></a>    <span class="kw">egen</span> ordering<span class="ot">`i'</span> = <span class="fu">rank</span>(rand_num<span class="ot">`i'</span>)</span>
<span id="cb48-16"><a></a>    <span class="kw">sort</span> ordering<span class="ot">`i'</span></span>
<span id="cb48-17"><a></a></span>
<span id="cb48-18"><a></a>    <span class="kw">gen</span> group<span class="ot">`i'</span> = <span class="st">""</span></span>
<span id="cb48-19"><a></a>    <span class="kw">replace</span> group<span class="ot">`i'</span> = <span class="st">"T"</span> <span class="kw">if</span> ordering &lt;= 50</span>
<span id="cb48-20"><a></a>    <span class="kw">replace</span> group<span class="ot">`i'</span> = <span class="st">"C"</span> <span class="kw">if</span> ordering &gt; 50 &amp; ordering&lt;=100</span>
<span id="cb48-21"><a></a>    </span>
<span id="cb48-22"><a></a>    <span class="kw">qui</span> summ motivation <span class="kw">if</span> group<span class="ot">`i'</span>==<span class="st">"T"</span></span>
<span id="cb48-23"><a></a>    <span class="fu">scalar</span> avT = <span class="ot">`r(mean)'</span></span>
<span id="cb48-24"><a></a>    <span class="kw">qui</span> summ motivation <span class="kw">if</span> group<span class="ot">`i'</span>==<span class="st">"C"</span></span>
<span id="cb48-25"><a></a>    <span class="fu">scalar</span> avC = <span class="ot">`r(mean)'</span></span>
<span id="cb48-26"><a></a>    </span>
<span id="cb48-27"><a></a>    <span class="kw">sort</span> fin_order</span>
<span id="cb48-28"><a></a>    <span class="kw">replace</span> av_diff = avT-avC <span class="kw">in</span> <span class="ot">`i'</span></span>
<span id="cb48-29"><a></a>    </span>
<span id="cb48-30"><a></a>    <span class="kw">drop</span> rand_num<span class="ot">`i'</span> ordering<span class="ot">`i'</span> group<span class="ot">`i'</span></span>
<span id="cb48-31"><a></a>    <span class="kw">local</span> i = <span class="ot">`i'</span> + 1</span>
<span id="cb48-32"><a></a>}</span>
<span id="cb48-33"><a></a><span class="kw">histogram</span> av_diff, <span class="kw">frequency</span> <span class="kw">kdensity</span>  </span>
<span id="cb48-34"><a></a><span class="kw">graph</span> <span class="kw">export</span> <span class="st">"files/graph3_6.png"</span> , <span class="kw">replace</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img data-src="files/graph3_6.png" width="800" height="450"></p>
</div>
</div>
</div>
</section>
<section id="randomization-8" class="slide level2 smaller" data-background="#ff9c6b">
<h2>Randomization</h2>
<p>The mean difference was as far from 0 as 1.5 for only a few out of the 10,000 random divisions of the data into two groups of 50.</p>
<ul>
<li><p>Thus, <strong>the difference between the mean motivation would almost always be less than the observed difference of 1.47 (22.27 - 20.80) if the treatment had no effect.</strong></p></li>
<li><p>It seems reasonable to believe that the treatment caused the difference in motivation.</p></li>
</ul>
</section></section>
<section>
<section id="measurement-error-problem" class="title-slide slide level1 smaller center" data-background="#f2e9b6">
<h1>Measurement Error problem</h1>

</section>
<section id="measurement-error-problem-1" class="slide level2 smaller" data-background="#f2e9b6">
<h2>Measurement Error problem</h2>
<p>The measurement error problem has a similar statistical structure to the omitted variable bias (OVB).</p>
<ul>
<li><p>“Classical” random measurement error for the <span class="math inline">\(y\)</span> will inflate standard errors but will not lead to biased coefficients.</p>
<ul>
<li><span class="math inline">\(y^{*} = y + \sigma_{1}\)</span></li>
<li>If you estimante <span class="math inline">\(y^{*} = f(x)\)</span>, you have <span class="math inline">\(y + \sigma_{1} = x + \epsilon\)</span></li>
<li><span class="math inline">\(y = x + u\)</span>
<ul>
<li>where <span class="math inline">\(u = \epsilon - \sigma_{1}\)</span></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="measurement-error-problem-2" class="slide level2 smaller" data-background="#f2e9b6">
<h2>Measurement Error problem</h2>
<ul>
<li><p>“Classical” random measurement error in x’s will bias coefficient estimates toward zero.</p></li>
<li><p><span class="math inline">\(x^*=x+\sigma_2\)</span></p></li>
<li><p>Imagine that <span class="math inline">\(x^*\)</span> is a bunch of noise. It would not explain anything. Thus, your results are biased toward zero.</p></li>
</ul>
</section>
<section id="measurement-error-problem-3" class="slide level2 smaller" data-background="#f2e9b6">
<h2>Measurement Error problem</h2>
<p>A example using one of the Wooldridge’s datasets.</p>
<div class="panel-tabset">
<ul id="tabset-9" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-9-1">R</a></li><li><a href="#tabset-9-2">Python</a></li><li><a href="#tabset-9-3">Stata</a></li></ul>
<div class="tab-content">
<div id="tabset-9-1">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>R</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a></a><span class="fu">library</span>(foreign) </span>
<span id="cb49-2"><a></a><span class="fu">library</span>(jtools)</span>
<span id="cb49-3"><a></a>data <span class="ot">&lt;-</span> <span class="fu">read.dta</span>(<span class="st">"files/CEOSAL1.dta"</span>)</span>
<span id="cb49-4"><a></a><span class="fu">set.seed</span>(<span class="dv">2</span>)</span>
<span id="cb49-5"><a></a>data<span class="sc">$</span>salary_noise <span class="ot">&lt;-</span> data<span class="sc">$</span>salary <span class="sc">+</span> <span class="fu">runif</span>(<span class="fu">length</span>((data<span class="sc">$</span>salary)), <span class="at">min=</span><span class="sc">-</span><span class="dv">100</span>, <span class="at">max=</span> <span class="dv">100</span>)</span>
<span id="cb49-6"><a></a>data<span class="sc">$</span>roe_noise <span class="ot">&lt;-</span> data<span class="sc">$</span>roe <span class="sc">+</span> <span class="fu">runif</span>(<span class="fu">length</span>((data<span class="sc">$</span>roe)), <span class="at">min=</span><span class="sc">-</span><span class="dv">100</span>, <span class="at">max=</span> <span class="dv">100</span>)</span>
<span id="cb49-7"><a></a><span class="co"># OLS model </span></span>
<span id="cb49-8"><a></a>model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(data<span class="sc">$</span>salary <span class="sc">~</span> data<span class="sc">$</span>roe)</span>
<span id="cb49-9"><a></a>model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(data<span class="sc">$</span>salary <span class="sc">~</span> data<span class="sc">$</span>roe_noise)</span>
<span id="cb49-10"><a></a>model3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(data<span class="sc">$</span>salary_noise <span class="sc">~</span> data<span class="sc">$</span>roe)</span>
<span id="cb49-11"><a></a><span class="co">#summary(model1)</span></span>
<span id="cb49-12"><a></a><span class="co">#summary(model2)</span></span>
<span id="cb49-13"><a></a><span class="co">#summary(model3)</span></span>
<span id="cb49-14"><a></a><span class="fu">export_summs</span>(model1, model2, model3, <span class="at">digits =</span> <span class="dv">3</span> , <span class="at">model.names =</span> <span class="fu">c</span>(<span class="st">"Roe"</span>, <span class="st">"Roe (X) with noise"</span>, <span class="st">"Salary (y) with noise"</span>) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table id="tab:unnamed-chunk-24" class="huxtable" data-quarto-postprocess="true" style="border-collapse: collapse; border: 0px; margin-bottom: 2em; margin-top: 2em; ; margin-left: auto; margin-right: auto;  ">
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="text-align: center; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0.8pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td data-quarto-table-cell-role="th" style="text-align: center; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0.8pt 0pt 0.4pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Roe</td>
<td data-quarto-table-cell-role="th" style="text-align: center; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0.8pt 0pt 0.4pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Roe (X) with noise</td>
<td data-quarto-table-cell-role="th" style="text-align: center; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0.8pt 0pt 0.4pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Salary (y) with noise</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th" style="text-align: left; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">(Intercept)</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">963.191 ***</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">1269.739 ***</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">964.058 ***</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="text-align: left; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">(213.240)&nbsp;&nbsp;&nbsp;</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">(97.356)&nbsp;&nbsp;&nbsp;</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">(214.588)&nbsp;&nbsp;&nbsp;</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th" style="text-align: left; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">data$roe</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">18.501&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">18.318&nbsp;&nbsp;&nbsp;&nbsp;</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="text-align: left; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">(11.123)&nbsp;&nbsp;&nbsp;</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">(11.194)&nbsp;&nbsp;&nbsp;</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th" style="text-align: left; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">data$roe_noise</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.868&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="text-align: left; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0.4pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0.4pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">(1.593)&nbsp;&nbsp;&nbsp;</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0.4pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th" style="text-align: left; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">N</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">209&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">209&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">209&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="text-align: left; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0.8pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">R2</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0.8pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.013&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0.8pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.001&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td style="text-align: right; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0.8pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.013&nbsp;&nbsp;&nbsp;&nbsp;</td>
</tr>
<tr class="even">
<td colspan="4" data-quarto-table-cell-role="th" style="text-align: left; vertical-align: top; white-space: normal; border-style: solid solid solid solid; border-width: 0.8pt 0pt 0pt 0pt; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05.</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<div id="tabset-9-2">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Python</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb50-2"><a></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb50-3"><a></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb50-4"><a></a><span class="im">import</span> statsmodels.formula.api <span class="im">as</span> smf</span>
<span id="cb50-5"><a></a><span class="im">from</span> statsmodels.iolib.summary2 <span class="im">import</span> summary_col</span>
<span id="cb50-6"><a></a></span>
<span id="cb50-7"><a></a>data <span class="op">=</span> pd.read_stata(<span class="st">"files/CEOSAL1.dta"</span>)</span>
<span id="cb50-8"><a></a>np.random.seed(<span class="dv">2</span>)</span>
<span id="cb50-9"><a></a><span class="co"># Add noise to the 'salary' and 'roe' columns</span></span>
<span id="cb50-10"><a></a>data[<span class="st">'salary_noise'</span>] <span class="op">=</span> data[<span class="st">'salary'</span>] <span class="op">+</span> np.random.uniform(<span class="op">-</span><span class="dv">100</span>, <span class="dv">100</span>, <span class="bu">len</span>(data))</span>
<span id="cb50-11"><a></a>data[<span class="st">'roe_noise'</span>] <span class="op">=</span> data[<span class="st">'roe'</span>] <span class="op">+</span> np.random.uniform(<span class="op">-</span><span class="dv">100</span>, <span class="dv">100</span>, <span class="bu">len</span>(data))</span>
<span id="cb50-12"><a></a><span class="co"># OLS model</span></span>
<span id="cb50-13"><a></a>model1 <span class="op">=</span> smf.ols(formula<span class="op">=</span><span class="st">'salary ~ roe'</span>, data<span class="op">=</span>data).fit()</span>
<span id="cb50-14"><a></a>model2 <span class="op">=</span> smf.ols(formula<span class="op">=</span><span class="st">'salary ~ roe_noise'</span>, data<span class="op">=</span>data).fit()</span>
<span id="cb50-15"><a></a>model3 <span class="op">=</span> smf.ols(formula<span class="op">=</span><span class="st">'salary_noise ~ roe'</span>, data<span class="op">=</span>data).fit()</span>
<span id="cb50-16"><a></a><span class="co"># Create a summary table for all regressions</span></span>
<span id="cb50-17"><a></a>results <span class="op">=</span> summary_col([model1, model2, model3], </span>
<span id="cb50-18"><a></a>                      model_names<span class="op">=</span>[<span class="st">'Reg 1'</span>, <span class="st">'Reg 2'</span>, <span class="st">'Reg 3'</span>],</span>
<span id="cb50-19"><a></a>                      stars<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb50-20"><a></a>                      float_format<span class="op">=</span><span class="st">'</span><span class="sc">%0.2f</span><span class="st">'</span>)</span>
<span id="cb50-21"><a></a><span class="co"># Print the summary table</span></span>
<span id="cb50-22"><a></a><span class="bu">print</span>(results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
=============================================
                 Reg 1     Reg 2      Reg 3  
---------------------------------------------
Intercept      963.19*** 1262.12*** 966.97***
               (213.24)  (98.19)    (213.37) 
R-squared      0.01      0.00       0.01     
R-squared Adj. 0.01      -0.00      0.01     
roe            18.50*               17.92    
               (11.12)              (11.13)  
roe_noise                1.25                
                         (1.63)              
=============================================
Standard errors in parentheses.
* p&lt;.1, ** p&lt;.05, ***p&lt;.01</code></pre>
</div>
</div>
</div>
<div id="tabset-9-3">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Stata</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb52-1"><a></a><span class="kw">use</span> <span class="st">"files/CEOSAL1.dta"</span>, <span class="kw">clear</span></span>
<span id="cb52-2"><a></a><span class="kw">set</span> <span class="dv">seed</span> 2</span>
<span id="cb52-3"><a></a><span class="kw">gen</span> salary_noise = salary + runiform() * 200 - 100</span>
<span id="cb52-4"><a></a><span class="kw">gen</span> roe_noise = roe + runiform() * 200 - 100</span>
<span id="cb52-5"><a></a>eststo: <span class="kw">qui</span> <span class="kw">reg</span> salary roe</span>
<span id="cb52-6"><a></a>eststo: <span class="kw">qui</span> <span class="kw">reg</span> salary roe_noise</span>
<span id="cb52-7"><a></a>eststo: <span class="kw">qui</span> <span class="kw">reg</span> salary_noise roe</span>
<span id="cb52-8"><a></a>esttab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(est1 stored)

(est2 stored)

(est3 stored)


------------------------------------------------------------
                      (1)             (2)             (3)   
                   salary          salary    salary_noise   
------------------------------------------------------------
roe                 18.50                           18.14   
                   (1.66)                          (1.63)   

roe_noise                          0.0336                   
                                   (0.02)                   

_cons               963.2***       1280.4***        966.1***
                   (4.52)         (12.71)          (4.53)   
------------------------------------------------------------
N                     209             209             209   
------------------------------------------------------------
t statistics in parentheses
* p&lt;0.05, ** p&lt;0.01, *** p&lt;0.001</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="any-questions" class="slide level2 smaller" data-background="#fdf6e3">
<h2>🙋‍♂️ <strong>Any Questions?</strong></h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="thank-you">Thank You!</h3>
<p><img data-src="figs/qa2.png" style="box-shadow: none;;width:110.0%"></p>
</div><div class="column" style="width:50%;">
<div style="text-align:right;">
<p><img src="figs/avatar.jpg" width="120px" style="border-radius:50%; box-shadow:0 4px 12px rgba(0,0,0,.25);"></p>
</div>
<h3 id="henrique-c.-martins"><strong>Henrique C. Martins</strong></h3>
<ul>
<li>🌐 <a href="https://eaesp.fgv.br/en/people/henrique-castro-martins">FGV/EAESP</a><br>
</li>
<li>💼 <a href="https://www.linkedin.com/in/henriquecastror/">LinkedIn</a><br>
</li>
<li>🧠 <a href="https://scholar.google.com.br/citations?user=7gIfkRMAAAAJ&amp;hl=pt-BR&amp;oi=ao">Google Scholar</a><br>
</li>
<li>📄 <a href="http://lattes.cnpq.br/6076997472159785">Lattes CV</a><br>
</li>
<li>🏠 <a href="https://henriquemartins.net/">Personal Website</a><br>
</li>
</ul>
</div>
</div>

<div class="quarto-auto-generated-content">
<p><img src="figs/background8.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><strong><a href="#/any-questions"><strong>Henrique C. Martins</strong></a> [<a href="mailto:henrique.martins@fgv.br">henrique.martins@fgv.br</a>][Do not use without permission]</strong></p>
</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../site_libs/revealjs/plugin/multiplex/socket.io.js"></script>
  <script src="../../site_libs/revealjs/plugin/multiplex/multiplex.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'multiplex': {"secret":null,"id":"2fbb12cb4304c493","url":"https://reveal-multiplex.glitch.me/"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    <script type="text/javascript">
      Reveal.on('ready', event => {
        if (event.indexh === 0) {
          document.querySelector("div.has-logo > img.slide-logo").style.display = "none";
        }
      });
      Reveal.addEventListener('slidechanged', (event) => {
        if (event.indexh === 0) {
          Reveal.configure({ slideNumber: null });
          document.querySelector("div.has-logo > img.slide-logo").style.display = "none";
        }
        if (event.indexh === 1) {
          Reveal.configure({ slideNumber: 'c' });
          document.querySelector("div.has-logo > img.slide-logo").style.display = null;
        }
      });
    </script>
    

</body></html>