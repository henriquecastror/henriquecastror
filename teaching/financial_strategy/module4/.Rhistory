question_id   = "module3_tf_q101",
qtype         = "tf",
correct_value = "T",
tolerance     = NULL,
points        = 1,
module        = "mod3",
slideid       = "module3_quiz1"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module3_tf_q101 | HTTP:", res$status, "\n", res$body)
}
#| echo: false
#| message: false
# Helper: funÃ§Ã£o para enviar payload
send_answer_key <- function(payload, endpoint) {
if (!requireNamespace("httr2", quietly = TRUE)) {
stop("Pacote 'httr2' nÃ£o instalado. Instale com install.packages('httr2').")
}
admin_token <- Sys.getenv("ADMIN_TOKEN", unset = NA)
if (is.na(admin_token) || admin_token == "18317799tgA!") {
stop("VariÃ¡vel de ambiente ADMIN_TOKEN nÃ£o definida.")
}
req <- httr2::request(endpoint) |>
httr2::req_method("POST") |>
httr2::req_headers(
"content-type" = "application/json",
"x-admin-token" = admin_token
) |>
httr2::req_body_json(payload)
resp <- httr2::req_perform(req)
list(
status = httr2::resp_status(resp),
body   = tryCatch(httr2::resp_body_string(resp), error = function(e) "")
)
}
#| echo: false
if (params$send && params$send_id == "module3_tf_q101") {
payload <- list(
source = "solutions.qmd",
items = list(list(
question_id   = "module3_tf_q101",
qtype         = "tf",
correct_value = "T",
tolerance     = NULL,
points        = 1,
module        = "mod3",
slideid       = "module3_quiz1"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module3_tf_q101 | HTTP:", res$status, "\n", res$body)
}
#| echo: false
if (params$send && params$send_id == "module3_tf_q101") {
payload <- list(
source = "solutions.qmd",
items = list(list(
question_id   = "module4_tf_q101",
qtype         = "tf",
correct_value = "T",
tolerance     = NULL,
points        = 1,
module        = "mod3",
slideid       = "module3_quiz1"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module3_tf_q101 | HTTP:", res$status, "\n", res$body)
}
#| echo: false
if (params$send && params$send_id == "module4_tf_q101") {
payload <- list(
source = "solutions.qmd",
items = list(list(
question_id   = "module4_tf_q101",
qtype         = "tf",
correct_value = "T",
tolerance     = NULL,
points        = 1,
module        = "mod3",
slideid       = "module4_quiz1"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module3_tf_q101 | HTTP:", res$status, "\n", res$body)
}
#| echo: false
if (params$send && params$send_id == "module4_tf_q101") {
payload <- list(
source = "solutions.qmd",
items = list(list(
question_id   = "module4_tf_q101",
qtype         = "tf",
correct_value = "T",
tolerance     = NULL,
points        = 1,
module        = "mod4",
slideid       = "module4_quiz1"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_tf_q101 | HTTP:", res$status, "\n", res$body)
}
#| echo: false
if (params$send && params$send_id == "module4_tf_q101") {
payload <- list(
source = "solutions.qmd",
items = list(list(
question_id   = "module4_tf_q101",
qtype         = "tf",
correct_value = "T",
tolerance     = NULL,
points        = 1,
module        = "mod4",
slideid       = "module4_quiz1"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_tf_q101 | HTTP:", res$status, "\n", res$body)
}
#| echo: false
if (params$send && params$send_id == "module4_tf_q101") {
payload <- list(
slide_id = "module4_quiz1",   # ðŸ”‘ campo exigido pelo worker
items = list(list(
question_id   = "module4_tf_q101",
qtype         = "tf",
correct_value = "T",
tolerance     = NULL,
points        = 1,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_tf_q101 | HTTP:", res$status, "\n", res$body)
}
#| echo: false
#| message: false
# Helper: funÃ§Ã£o para enviar payload
send_answer_key <- function(payload, endpoint) {
if (!requireNamespace("httr2", quietly = TRUE)) {
stop("Pacote 'httr2' nÃ£o instalado. Instale com install.packages('httr2').")
}
admin_token <- Sys.getenv("ADMIN_TOKEN", unset = NA)
if (is.na(admin_token) || admin_token == "18317799tgA!") {
stop("VariÃ¡vel de ambiente ADMIN_TOKEN nÃ£o definida.")
}
req <- httr2::request(endpoint) |>
httr2::req_method("POST") |>
httr2::req_headers(
"content-type" = "application/json",
"x-admin-token" = admin_token
) |>
httr2::req_body_json(payload)
resp <- httr2::req_perform(req)
list(
status = httr2::resp_status(resp),
body   = tryCatch(httr2::resp_body_string(resp), error = function(e) "")
)
}
#| echo: false
if (params$send && params$send_id == "module4_tf_q101") {
payload <- list(
slide_id = "module4_quiz1",   # ðŸ”‘ campo exigido pelo worker
items = list(list(
question_id   = "module4_tf_q101",
qtype         = "tf",
correct_value = "T",
tolerance     = NULL,
points        = 1,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_tf_q101 | HTTP:", res$status, "\n", res$body)
}
#| echo: false
#| message: false
# Helper: funÃ§Ã£o para enviar payload
send_answer_key <- function(payload, endpoint) {
if (!requireNamespace("httr2", quietly = TRUE)) {
stop("Pacote 'httr2' nÃ£o instalado. Instale com install.packages('httr2').")
}
admin_token <- Sys.getenv("ADMIN_TOKEN", unset = NA)
if (is.na(admin_token) || admin_token == "") {
stop("VariÃ¡vel de ambiente ADMIN_TOKEN nÃ£o definida.")
}
req <- httr2::request(endpoint) |>
httr2::req_method("POST") |>
httr2::req_headers(
"content-type" = "application/json",
"x-admin-token" = admin_token
) |>
httr2::req_body_json(payload)
resp <- httr2::req_perform(req)
list(
status = httr2::resp_status(resp),
body   = tryCatch(httr2::resp_body_string(resp), error = function(e) "")
)
}
#| echo: false
if (params$send && params$send_id == "module4_tf_q101") {
payload <- list(
slide_id = "module4_quiz1",   # ðŸ”‘ campo exigido pelo worker
items = list(list(
question_id   = "module4_tf_q101",
qtype         = "tf",
correct_value = "T",
tolerance     = NULL,
points        = 1,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_tf_q101 | HTTP:", res$status, "\n", res$body)
}
#| echo: false
payload <- list(
slide_id = "module4_quiz1",
items = list(list(
question_id   = "module4_tf_q101",
qtype         = "tf",
correct_value = "T",
tolerance     = NULL,
points        = 1,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
Sys.setenv(ADMIN_TOKEN = "18317799TGa!")
Sys.setenv(ADMIN_TOKEN = "18317799tgA!")
#| echo: false
payload <- list(
slide_id = "module4_quiz1",
items = list(list(
question_id   = "module4_tf_q101",
qtype         = "tf",
correct_value = "T",
tolerance     = NULL,
points        = 1,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_tf_q101 | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_quiz2",   # slide/pÃ¡gina onde essa questÃ£o aparece
items = list(list(
question_id   = "module4_mcq_q201",
qtype         = "mcq",
correct_value = "B",         # letra A..E (maiÃºscula)
tolerance     = NULL,        # sempre NULL para mcq
points        = 1,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_mcq_q201 | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_quiz3",
items = list(list(
question_id   = "module4_num_q301",
qtype         = "num",
correct_value = 14.58,   # nÃºmero (use ponto decimal)
tolerance     = 0.10,    # tolerÃ¢ncia absoluta; NULL se nÃ£o houver
points        = 2,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_num_q301 | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_quiz3",
items = list(list(
question_id   = "module4_num_q301",
qtype         = "num",
correct_value = 14.88,   # nÃºmero (use ponto decimal)
tolerance     = 0.10,    # tolerÃ¢ncia absoluta; NULL se nÃ£o houver
points        = 2,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_num_q301 | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_q1",
items = list(list(
question_id   = "module4_num_q8a",
qtype         = "num",
correct_value = 0.92,   # nÃºmero (use ponto decimal)
tolerance     = 0.10,    # tolerÃ¢ncia absoluta; NULL se nÃ£o houver
points        = 2,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_num_q301 | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_q1",
items = list(list(
question_id   = "module4_num_q8b",
qtype         = "num",
correct_value = 0.92,   # nÃºmero (use ponto decimal)
tolerance     = 0.10,    # tolerÃ¢ncia absoluta; NULL se nÃ£o houver
points        = 2,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_num_q301 | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_q1",
items = list(list(
question_id   = "module4_num_q8c",
qtype         = "num",
correct_value = 0.92,   # nÃºmero (use ponto decimal)
tolerance     = 0.10,    # tolerÃ¢ncia absoluta; NULL se nÃ£o houver
points        = 2,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_num_q301 | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_q1",
items = list(list(
question_id   = "module4_num_q8a",
qtype         = "num",
correct_value = 0.92,   # nÃºmero (use ponto decimal)
tolerance     = 0.010,    # tolerÃ¢ncia absoluta; NULL se nÃ£o houver
points        = 2,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_num_q301 | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_q1",
items = list(list(
question_id   = "module4_num_q8b",
qtype         = "num",
correct_value = 0.92,   # nÃºmero (use ponto decimal)
tolerance     = 0.010,    # tolerÃ¢ncia absoluta; NULL se nÃ£o houver
points        = 2,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_num_q301 | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_q1",
items = list(list(
question_id   = "module4_num_q8c",
qtype         = "num",
correct_value = 0.92,   # nÃºmero (use ponto decimal)
tolerance     = 0.010,    # tolerÃ¢ncia absoluta; NULL se nÃ£o houver
points        = 2,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_num_q301 | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_num_qu2",
items = list(list(
question_id   = "module4_num_q8a",
qtype         = "num",
correct_value = 1.16,   # nÃºmero (use ponto decimal)
tolerance     = 0.01,    # tolerÃ¢ncia absoluta; NULL se nÃ£o houver
points        = 2,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_num_q8a | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_num_qu2",
items = list(list(
question_id   = "module4_num_q12a",
qtype         = "num",
correct_value = 2.45,   # nÃºmero (use ponto decimal)
tolerance     = 0.01,    # tolerÃ¢ncia absoluta; NULL se nÃ£o houver
points        = 2,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_num_q8a | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_num_qu2",
items = list(list(
question_id   = "module4_num_q12b",
qtype         = "num",
correct_value = 3.08,   # nÃºmero (use ponto decimal)
tolerance     = 0.01,    # tolerÃ¢ncia absoluta; NULL se nÃ£o houver
points        = 2,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_num_q8a | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_num_qu2",
items = list(list(
question_id   = "module4_num_q13a",
qtype         = "num",
correct_value = 5.80,   # nÃºmero (use ponto decimal)
tolerance     = 0.02,    # tolerÃ¢ncia absoluta; NULL se nÃ£o houver
points        = 2,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_num_q8a | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_num_qu2",
items = list(list(
question_id   = "module4_num_q13b",
qtype         = "num",
correct_value = 8.69,   # nÃºmero (use ponto decimal)
tolerance     = 0.02,    # tolerÃ¢ncia absoluta; NULL se nÃ£o houver
points        = 2,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_num_q8a | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_num_qu2",
items = list(list(
question_id   = "module4_tf_q43",
qtype         = "tf",
correct_value = "F",
tolerance     = NULL,
points        = 1,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_tf_q101 | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_num_qu2",
items = list(list(
question_id   = "module4_tf_q46",
qtype         = "tf",
correct_value = "T",
tolerance     = NULL,
points        = 1,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_tf_q101 | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_num_qu2",
items = list(list(
question_id   = "module4_tf_q81",
qtype         = "tf",
correct_value = "F",
tolerance     = NULL,
points        = 1,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_tf_q101 | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_num_qu2",
items = list(list(
question_id   = "module4_num_q12b",
qtype         = "num",
correct_value = 3.08,   # nÃºmero (use ponto decimal)
tolerance     = 0.02,    # tolerÃ¢ncia absoluta; NULL se nÃ£o houver
points        = 2,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_num_q8a | HTTP:", res$status, "\n", res$body)
#| echo: false
payload <- list(
slide_id = "module4_num_qu2",
items = list(list(
question_id   = "module4_num_q12a",
qtype         = "num",
correct_value = 2.45,   # nÃºmero (use ponto decimal)
tolerance     = 0.02,    # tolerÃ¢ncia absoluta; NULL se nÃ£o houver
points        = 2,
module        = "mod4"
))
)
res <- send_answer_key(payload, params$endpoint)
cat("â†’ module4_num_q8a | HTTP:", res$status, "\n", res$body)
