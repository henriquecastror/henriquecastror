::: {.question}

**Debt, Taxes, and Firm Value (MM with Corporate Taxes)**

```{r}
#| eval: true
#| results: asis
#| echo: false
#| warning: false

set.seed(803)
library(webexercises)
library(knitr)

# Randomized core parameters (all in decimals or millions as noted)
r_U <- round(rnorm(1, mean = 0.10, sd = 0.004), 4)   # unlevered cost of capital
r_D <- round(rnorm(1, mean = 0.055, sd = 0.004), 4)  # cost of debt
T_c <- sample(c(0.25, 0.30, 0.35), 1)                # corporate tax rate
D   <- round(rnorm(1, mean = 300, sd = 15), 1)       # debt (million $)
V_U <- round(rnorm(1, mean = 550, sd = 20), 1)       # unlevered firm value (million $)

# Core computations
pv_tax_shield <- round(T_c * D, 1)                   # PV of tax shield (million $)
V_L <- round(V_U + pv_tax_shield, 1)                 # levered firm value (million $)
E   <- round(V_L - D, 1)                             # equity value (million $)

# Levered cost of equity (MM with corporate taxes)
r_E <- r_U + (D / E) * (1 - T_c) * (r_U - r_D)

# After-tax WACC
w_E <- E / (D + E)
w_D <- D / (D + E)
r_W_after <- w_E * r_E + w_D * r_D * (1 - T_c)

# Rounded outputs for answer keys
ans_a <- pv_tax_shield                  # (million)
ans_b <- V_L                            # (million)
ans_c <- E                              # (million)
ans_d <- round(100 * r_E, 2)            # (%)
ans_e <- round(100 * r_W_after, 2)      # (%)

```

Aurora Technologies is currently unlevered and is considering adopting a permanent debt policy. The following information applies:

 - Unlevered firm value: `r V_U` million
 - Unlevered cost of capital: `r round(100*r_U, 2)`%
 - Corporate tax rate: `r round(100*T_c, 0)`%
 - Proposed permanent debt: `r D` million at `r round(100*r_D, 2)`%

Compute:

- (a) the present value of the interest tax shield (in million dollars)
- (b) the levered firm value $V_L$ (in million dollars)
- (c) the equity value $E$ (in million dollars)
- (d) the levered cost of equity $r_E$ (in %)
- (e) the after-tax WACC (in %)

:::

::: {.question-block}

<form onsubmit="event.preventDefault();" style="display:flex; gap:8px; align-items:center;"> <label for="module8_num_q3a_single"><strong>a. PV of interest tax shield (millions):</strong></label> <input type="number" id="module8_num_q3a_single" name="module8_num_q3a_single" style="width:160px;" data-correct-answer=`r ans_a` data-tolerance="0.5" step="0.1" /> </form> <div id="feedback-module8_num_q3a_single" class="feedback" data-status="" style="display:none;"> ✅ $\text{PV(Tax Shield)} = T_c \times D = `r round(T_c,2)` $\times$ `r D` = <b>`r ans_a`</b> million. </div> 
:::

::: {.question-block}

<form onsubmit="event.preventDefault();" style="display:flex; gap:8px; align-items:center;"> <label for="module8_num_q3b_single"><strong>b. $V_L$ (millions):</strong></label> <input type="number" id="module8_num_q3b_single" name="module8_num_q3b_single" style="width:160px;" data-correct-answer=`r ans_b` data-tolerance="0.5" step="0.1" /> </form> <div id="feedback-module8_num_q3b_single" class="feedback" data-status="" style="display:none;"> ✅ $V_L = V_U + \text{PV(Tax Shield)} = `r V_U` + `r ans_a` = <b>`r ans_b`</b> million. </div>
:::

::: {.question-block}

<form onsubmit="event.preventDefault();" style="display:flex; gap:8px; align-items:center;"> <label for="module8_num_q3c_single"><strong>c. $E$ (millions):</strong></label> <input type="number" id="module8_num_q3c_single" name="module8_num_q3c_single" style="width:160px;" data-correct-answer=`r ans_c` data-tolerance="0.5" step="0.1" /> </form> <div id="feedback-module8_num_q3c_single" class="feedback" data-status="" style="display:none;"> ✅ $E = V_L - D = `r ans_b` - `r D` = <b>`r ans_c`</b> million. </div>
:::

::: {.question-block}

<form onsubmit="event.preventDefault();" style="display:flex; gap:8px; align-items:center;"> <label for="module8_num_q3d_single"><strong>d. $r_E$ (%):</strong></label> <input type="number" id="module8_num_q3d_single" name="module8_num_q3d_single" style="width:160px;" data-correct-answer=`r ans_d` data-tolerance="0.2" step="0.01" /> </form> <div id="feedback-module8_num_q3d_single" class="feedback" data-status="" style="display:none;"> ✅ $r_E = r_U + \frac{D}{E}(1 - T_c)(r_U - r_D)$  = <b>`r ans_d`%</b>. </div>
:::

::: {.question-block}

<form onsubmit="event.preventDefault();" style="display:flex; gap:8px; align-items:center;"> <label for="module8_num_q3e_single"><strong>e. After-tax WACC (%):</strong></label> <input type="number" id="module8_num_q3e_single" name="module8_num_q3e_single" style="width:160px;" data-correct-answer=`r ans_e` data-tolerance="0.2" step="0.01" /> </form> <div id="feedback-module8_num_q3e_single" class="feedback" data-status="" style="display:none;"> ✅ $WACC_{after} = \frac{E}{D+E}r_E + \frac{D}{D+E}r_D(1 - T_c)$ <br>
$= \frac{`r ans_c`}{`r D + ans_c`}r_E + \frac{`r D`}{`r D + ans_c`}r_D(1 - T_c) = \mathbf{`r ans_e`}\%.$ </div> 

:::